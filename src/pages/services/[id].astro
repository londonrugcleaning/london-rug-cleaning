---
import Layout from '../../layouts/Layout.astro';

export const prerender = true;
import { servicesData } from '@/data/services';
import { ServiceHero } from "@/components/service-detail/ServiceHero";
import { ServiceFeatures } from "@/components/service-detail/ServiceFeatures";
import { ServiceGallery } from "@/components/service-detail/ServiceGallery";
import { ServiceFAQ } from "@/components/service-detail/ServiceFAQ";
import { PricingTable } from "@/components/service-detail/PricingTable";
import { CTAButtons } from "@/components/CTAButtons";
import { CombinedServiceSchema } from "@/components/seo/CombinedServiceSchema";
import { ContactSection } from "@/components/home/ContactSection";
import { Phone } from "lucide-react";
import { Button } from "@/components/ui/button";

export function getStaticPaths() {
  return Object.keys(servicesData).map(id => ({
    params: { id }
  }));
}

const { id } = Astro.params;
const service = servicesData[id];

if (!service) {
  return Astro.redirect('/404');
}
---

<Layout 
  title={`${service.title} London`} 
  description={service.description}
>
  <div>
    <ServiceHero 
      title={service.title} 
      description={service.description} 
      heroImage={service.hero} 
      client:load
    />

    <section class="py-16 bg-white">
      <div class="container mx-auto px-4">
        <div class="max-w-3xl mx-auto">
          <p class="text-lg">{service.intro}</p>
        </div>
      </div>
    </section>

    <ServiceFeatures 
      features={service.features} 
      process={service.process} 
      client:visible
    />

    <ServiceGallery 
      title={service.title}
      gallery={service.gallery}
      client:visible
    />

    <PricingTable title={`${service.title} Pricing`} client:visible />

    <ServiceFAQ 
      faqs={service.faqs}
      client:visible
    />

    <ContactSection 
      title={`Ready to Get Your ${service.title} Service?`}
      client:visible 
    />

    <CombinedServiceSchema
      serviceType={service.title}
      serviceName={`Expert ${service.title} in London`}
      serviceDescription={service.description}
      client:load
    />
  </div>
</Layout>
