---
import Layout from '../../layouts/Layout.astro';
import { servicesData } from '@/data/services';
import { ServiceHero } from "@/components/service-detail/ServiceHero";
import { ServiceFeatures } from "@/components/service-detail/ServiceFeatures";
import { ServiceGallery } from "@/components/service-detail/ServiceGallery";
import { ServiceFAQ } from "@/components/service-detail/ServiceFAQ";
import { PricingTable } from "@/components/service-detail/PricingTable";
import { CTAButtons } from "@/components/CTAButtons";
import { CombinedServiceSchema } from "@/components/seo/CombinedServiceSchema";
import { Phone } from "lucide-react";
import { Button } from "@/components/ui/button";

export function getStaticPaths() {
  return Object.keys(servicesData).map(id => ({
    params: { id }
  }));
}

const { id } = Astro.params;
const service = servicesData[id];

if (!service) {
  return Astro.redirect('/404');
}
---

<Layout 
  title={`${service.title} London`} 
  description={service.description}
>
  <div>
    <ServiceHero 
      title={service.title} 
      description={service.description} 
      heroImage={service.hero} 
      client:load
    />

    <section class="py-16 bg-white">
      <div class="container mx-auto px-4">
        <div class="max-w-3xl mx-auto">
          <p class="text-lg">{service.intro}</p>
        </div>
      </div>
    </section>

    <ServiceFeatures 
      features={service.features} 
      process={service.process} 
      client:visible
    />

    <ServiceGallery 
      title={service.title}
      gallery={service.gallery}
      client:visible
    />

    <PricingTable title={`${service.title} Pricing`} client:visible />

    <ServiceFAQ 
      faqs={service.faqs}
      client:visible
    />

    <section class="py-20 bg-blue-50">
      <div class="container mx-auto px-4 text-center">
        <h2 class="text-3xl font-semibold mb-6">
          Ready to Get Your {service.title} Service?
        </h2>
        <p class="text-lg text-muted-foreground mb-8 max-w-2xl mx-auto">
          Contact us today for a free quote and consultation. We offer free collection and delivery across London.
        </p>
        <div class="flex justify-center">
          <CTAButtons client:visible />
        </div>
      </div>
    </section>

    <CombinedServiceSchema
      serviceType={service.title}
      serviceName={`Expert ${service.title} in London`}
      serviceDescription={service.description}
      client:load
    />
  </div>
</Layout>
